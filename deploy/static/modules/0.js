webpackJsonp([0],{"4WqT":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home-page-wrap-ba"},[a("w-row",{staticClass:"home-page-body"},[a("w-col",{attrs:{span:6}},[a("title-style",{staticClass:"pd-y_22 po_re"},[a("span",{attrs:{slot:"header"},slot:"header"},[e._v("申请单列表")]),e._v(" "),a("w-button",{staticClass:"po_ab top_16 right_0",attrs:{type:"primary",plain:""},on:{click:function(t){e.handleAdd("left")}}},[e._v("新增")])],1),e._v(" "),a("w-table",{ref:"interfaceTable",staticClass:"mt-15",staticStyle:{width:"100%"},attrs:{"highlight-current-row":!0,"row-class-name":e.tableRowClassName,data:e.listMoulds,border:!0},on:{"row-click":e.handleRow}},[a("w-table-column",{attrs:{type:"index",width:"70",align:"center",label:"序号"}}),e._v(" "),a("w-table-column",{attrs:{prop:"MOULD_LEVEL",label:"类型"}}),e._v(" "),a("w-table-column",{attrs:{prop:"MOULD_NAME",label:"名称",width:"100"}}),e._v(" "),a("w-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"150","reference-cell":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("w-button",{attrs:{type:"text"},on:{click:function(a){e.onEditing(t.row,"left")}}},[e._v("修改")]),e._v(" "),a("w-button",{attrs:{type:"text"},on:{click:function(a){e.handleClone(t.row,"left")}}},[e._v("复制")]),e._v(" "),a("w-button",{attrs:{type:"text"},on:{click:function(a){e.handleConfirm(t.row,"left",t.$index)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("w-col",{attrs:{span:18}},[a("div",{staticClass:"pd-left_15"},[a("title-style",{staticClass:"pd-y_22  po_re"},[a("span",{attrs:{slot:"header"},slot:"header"},[e._v("项目列表")]),e._v(" "),a("w-button",{staticClass:"po_ab top_16 right_0",attrs:{type:"primary",plain:""},on:{click:function(t){e.handleAdd("right")}}},[e._v("新增")])],1),e._v(" "),a("w-table",{staticStyle:{width:"100%"},attrs:{data:e.listMouldItems,border:!0}},[a("w-table-column",{attrs:{type:"index",width:"70",align:"center",label:"序号"}}),e._v(" "),a("w-table-column",{attrs:{prop:"MOULD_ITEM_NAME",label:"项目名称"}}),e._v(" "),a("w-table-column",{attrs:{prop:"ITEM_AMOUNT",label:"默认数量"}}),e._v(" "),a("w-table-column",{attrs:{prop:"time",label:"单位"}}),e._v(" "),a("w-table-column",{attrs:{prop:"MAIN_NAME",label:"成分大类"}}),e._v(" "),a("w-table-column",{attrs:{prop:"ITEM_USEAREA",label:"对应费用明细",width:"150"}}),e._v(" "),a("w-table-column",{attrs:{prop:"ITEM_ADDFACTOR",label:"费用价格",width:"150"}}),e._v(" "),a("w-table-column",{attrs:{prop:"ITEM_REMARK",label:"备注"}}),e._v(" "),a("w-table-column",{attrs:{fixed:"right",label:"操作","reference-cell":"",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("w-button",{attrs:{type:"text"},on:{click:function(a){e.onEditing(t.row,"right")}}},[e._v("修改")]),e._v(" "),a("w-popconfirm",{attrs:{title:"确认删除这条内容吗? ",placement:"bottom"},on:{"document-click":function(a){e.handleCancel(t.$index)},confirm:function(a){e.handleConfirm(t.row,"right",t.$index)},cancel:function(a){e.handleCancel(t.$index)}}},[a("span",{staticClass:"popconfirm-reference",attrs:{slot:"reference"},slot:"reference"},[a("w-button",{attrs:{type:"text"}},[e._v("删除")])],1)])]}}])})],1)],1)])],1),e._v(" "),a("w-modal",{attrs:{visible:e.visible,title:e.modalType+e.modalTitle,showClose:!1,"close-on-click-modal":!1,width:"60%"},on:{"update:visible":function(t){e.visible=t}}},[a("w-form",{ref:"form",attrs:{"label-align":"right",model:e.form,"label-width":"120px",rules:e.rules}},[e.modalTitle===e.MODAL_TITLE.FORM||e.modalTitle===e.MODAL_TITLE.CLONE?a("w-row",[a("w-row",[a("w-col",{attrs:{span:12}},[a("w-form-item",{attrs:{label:"模版代码",prop:"mouldcode"}},[a("w-input",{attrs:{maxlength:20,showCounter:"",placeholder:"请输入代码"},model:{value:e.form.mouldcode,callback:function(t){e.$set(e.form,"mouldcode",t)},expression:"form.mouldcode"}})],1)],1),e._v(" "),a("w-col",{attrs:{span:12}},[a("w-form-item",{attrs:{label:"模版名称",prop:"mouldname"}},[a("w-input",{attrs:{maxlength:20,showCounter:"",placeholder:"请输入名称"},model:{value:e.form.mouldname,callback:function(t){e.$set(e.form,"mouldname",t)},expression:"form.mouldname"}})],1)],1)],1),e._v(" "),a("w-row",[a("w-col",{attrs:{span:12}},[a("w-form-item",{attrs:{label:"模版类型",prop:"mouldtype"}},[a("w-select",{attrs:{placeholder:"请选择模版类型"},model:{value:e.form.mouldtype,callback:function(t){e.$set(e.form,"mouldtype",t)},expression:"form.mouldtype"}},e._l(e.mtype,function(e){return a("w-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1),e._v(" "),a("w-col",{attrs:{span:12}},[a("w-form-item",{attrs:{label:"执行科室",prop:"execdeptcode"}},[a("w-select",{attrs:{placeholder:"请选择执行科室"},model:{value:e.form.execdeptcode,callback:function(t){e.$set(e.form,"execdeptcode",t)},expression:"form.execdeptcode"}},e._l(e.implement,function(e){return a("w-option",{key:e.DEPTCODE,attrs:{label:e.DEPTNAME,value:e.DEPTCODE}})}))],1)],1)],1),e._v(" "),a("w-row",[a("w-col",{attrs:{span:12}},[a("w-form-item",{attrs:{label:"开单类别",prop:"usearea"}},[a("w-select",{attrs:{placeholder:"请选择开单类别"},model:{value:e.form.usearea,callback:function(t){e.$set(e.form,"usearea",t)},expression:"form.usearea"}},e._l(e.category,function(e){return a("w-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1),e._v(" "),a("w-col",{attrs:{span:12}},[a("w-form-item",{attrs:{label:"开单科室"}},[a("w-select",{attrs:{placeholder:"请选择开单科室"},model:{value:e.form.applydeptcode,callback:function(t){e.$set(e.form,"applydeptcode",t)},expression:"form.applydeptcode"}},e._l(e.openings,function(e){return a("w-option",{key:e.DEPTCODE,attrs:{label:e.DEPTNAME,value:e.DEPTCODE}})}))],1)],1)],1)],1):e.modalTitle===e.MODAL_TITLE.ITEM?a("w-row",[a("w-row",[a("w-col",{attrs:{span:11}},[a("w-form-item",{attrs:{label:"成分大类",required:""}},[a("w-select",{attrs:{placeholder:"请选择成分大类"},on:{change:e.handleSelChange},model:{value:e.form.maincode,callback:function(t){e.$set(e.form,"maincode",t)},expression:"form.maincode"}},e._l(e.mainTypesList,function(e){return a("w-option",{key:e.MAIN_CODE,attrs:{label:e.MAIN_NAME,value:{value:e.MAIN_CODE,DETAIL_CODE:e.MAIN_CODE,DETAIL_NAME:e.MAIN_NAME}}})}))],1)],1),e._v(" "),a("w-col",{attrs:{span:1}},[a("i",{staticClass:"w-icon-plus",staticStyle:{"font-size":"33px"},on:{click:function(t){e.handlePlus("big")}}})]),e._v(" "),a("w-col",{attrs:{span:11}},[a("w-form-item",{attrs:{label:"成分小类",prop:"detailcode",rules:[{required:!0,message:"请选择成分小类"}]}},[a("w-select",{attrs:{placeholder:"请选择成分小类"},on:{change:e.handleSelChange1},model:{value:e.form.detailcode,callback:function(t){e.$set(e.form,"detailcode",t)},expression:"form.detailcode"}},e._l(e.detailTypesList,function(e){return a("w-option",{key:e.DETAIL_CODE,attrs:{label:e.DETAIL_NAME,value:{value:e.DETAIL_CODE,DETAIL_CODE:e.DETAIL_CODE,DETAIL_NAME:e.DETAIL_NAME}}})}))],1)],1),e._v(" "),""!==e.form.maincode?a("w-col",{attrs:{span:1}},[a("i",{staticClass:"w-icon-plus",staticStyle:{"font-size":"33px"},on:{click:function(t){e.handlePlus("sma")}}})]):e._e()],1),e._v(" "),a("w-row",[a("w-col",{attrs:{span:12}},[a("w-form-item",{attrs:{label:"项目代码",prop:"itemcode"}},[a("w-input",{attrs:{maxlength:20,showCounter:"",placeholder:"请输入代码"},model:{value:e.form.itemcode,callback:function(t){e.$set(e.form,"itemcode",t)},expression:"form.itemcode"}})],1)],1),e._v(" "),a("w-col",{attrs:{span:12}},[a("w-form-item",{attrs:{label:"项目名称",prop:"itemname"}},[a("w-input",{attrs:{maxlength:20,showCounter:"",placeholder:"请输入名称"},model:{value:e.form.itemname,callback:function(t){e.$set(e.form,"itemname",t)},expression:"form.itemname"}})],1)],1)],1),e._v(" "),a("w-row",[a("w-col",[a("w-form-item",{staticClass:" pd-right",attrs:{label:"费用对应",prop:""}},[a("div",{staticClass:"unitDepartment-tag",on:{click:e.hadleInputFocus}},[e._l(e.selection,function(t,o){return a("w-tag",{key:o,attrs:{size:"mini",closable:""},on:{close:function(a){e.handleClose(t)}}},[e._v(e._s(t.name))])}),e._v(" "),a("span",{},[e._v("点击选择费用对应内容")])],2),e._v(" "),e.showInput?a("w-input",{staticClass:"po_ab top_0 right_0",attrs:{placeholder:"输入内容进行搜索"}}):e._e(),e._v(" "),a("w-button",{staticClass:"po_ab top_0 right_0",attrs:{size:"mini",type:"text"},on:{click:function(t){e.add(e.showInput)}}},[e._v(e._s(e.h=!0===e.showInput?"取消":"添加"))])],1)],1)],1),e._v(" "),a("w-row",[a("w-col",{attrs:{span:12}},[a("w-form-item",{attrs:{label:"默认数量",prop:"amount"}},[a("w-input-number",{attrs:{min:0},model:{value:e.form.amount,callback:function(t){e.$set(e.form,"amount",e._n(t))},expression:"form.amount"}})],1)],1),e._v(" "),a("w-col",{attrs:{span:12}},[a("w-form-item",{attrs:{label:"加减量",prop:"name"}},[a("w-input-number",{attrs:{min:0},model:{value:e.form.addfactor,callback:function(t){e.$set(e.form,"addfactor",e._n(t))},expression:"form.addfactor"}})],1)],1)],1),e._v(" "),a("w-row",[a("w-col",{attrs:{span:24}},[a("w-form-item",{attrs:{label:"备注"}},[a("w-input",{attrs:{showCounter:"",placeholder:"请填写备注"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1)],1):e.modalTitle===e.MODAL_TITLE.SELECT_ITEM?a("div",[a("w-input",{attrs:{placeholder:"请输入项目代码/名称搜索",sufAppendIsButton:""},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}},[a("template",{slot:"suf-append"},[a("i",{staticClass:"w-icon-search"})])],2),e._v(" "),a("w-table",{ref:"multiTable",staticClass:"mt-15",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:!0},on:{"selection-change":e.handleSelectionChange}},[a("w-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),a("w-table-column",{attrs:{prop:"value",label:"代码",width:"150"}}),e._v(" "),a("w-table-column",{attrs:{prop:"name",label:"名称"}})],1),e._v(" "),a("w-pagination",{attrs:{total:10,"page-size":4,"page-sizes":[4,8,12,16],show:["prev","next","total","jump"]},on:{"page-size-change":e.handlePageSizeChange}})],1):a("w-row",[a("w-row",[a("w-col",{attrs:{span:24}},[a("w-form-item",{attrs:{label:e.modalTitle+"代码",prop:"code",rules:[{required:!0,message:"年龄不能为空"}]}},[a("w-input",{attrs:{showCounter:"",placeholder:"请填写成分代码"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1)],1)],1),e._v(" "),a("w-row",[a("w-col",{attrs:{span:24}},[a("w-form-item",{attrs:{label:e.modalTitle+"名称",prop:"name"}},[a("w-input",{attrs:{showCounter:"",placeholder:"请填写成分名称"},model:{value:e.codeLIst.name,callback:function(t){e.$set(e.codeLIst,"name",t)},expression:"codeLIst.name"}})],1)],1)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("w-button",{on:{click:e.reset}},[e._v("取 消")]),e._v(" "),a("w-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]}},"Gm+R":function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a("//Fk"),s=o(n),l=a("mvHQ"),r=o(l),i=a("g/04"),d=o(i),u=a("cCA+"),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(u),m=a("UeB+"),f=o(m),p=a("7+uW"),h=o(p),g=a("NYxO"),w=o(g),v=a("mtWM");h.default.use(w.default);var b=function(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.href)||[,""])[1].replace(/\+/g,"%20"))||null},M=void 0,T=!0;v.interceptors.request.use(function(e){if("options"==e.method)return e;if(e.useOptions&&1==e.useOptions.ForSmartClient)return e;e.headers.Authorization=authToken||jwt;var t=[],a=b("menuid");t.push(a);var o=window.rootVue.$route,n="";return o&&o.params&&o.params.menuid&&(n=o.params.menuid,t.push(n)),e.headers.menuid=t.join(","),M||(M=f.default.getClientInfo()),e.headers.ClientInfo=encodeURIComponent((0,r.default)(M)),e},function(e){return s.default.reject(e)}),v.interceptors.response.use(function(e){return e.status>=200&&e.status<=300?e:s.default.reject(e)},function(e){return s.default.reject(e)});var _=function(e,t){var a="";if(e&&e.response)switch(e.response.status){case 400:a="请求错误";break;case 401:a="未授权，请登录";break;case 403:a="拒绝访问";break;case 404:a="请求地址出错: "+e.response.config.url;break;case 408:a="请求超时";break;case 500:a="服务器内部错误";break;case 501:a="服务未实现";break;case 502:a="网关错误";break;case 503:a="服务不可用";break;case 504:e.message="网关超时";break;case 505:a="HTTP版本不受支持"}e.message.indexOf("timeout of")>=0?a="请求服务已超时":"Network Error"==e.message&&(a="网络服务异常，请检查网路服务是否正常。"),t.isOnline||c.showMessage("请求服务异常，"+e.message+"："+a,c.messageType.ERROR)},y=function(e,t){var a="";if(e&&e.response)switch(e.response.status){case 400:a="请求错误";break;case 401:a="未授权，请登录";break;case 403:a="拒绝访问";break;case 404:a="请求地址出错: "+e.response.config.url;break;case 408:a="请求超时";break;case 500:a="服务器内部错误";break;case 501:a="服务未实现";break;case 502:a="网关错误";break;case 503:a="服务不可用";break;case 504:e.message="网关超时";break;case 505:a="HTTP版本不受支持"}e.message.indexOf("timeout of")>=0?a="请求服务已超时":e.message,t=t||"",c.showMessage("请求"+t+"服务错误,请检查TechSvr是否启动："+e.message+">>"+a,c.messageType.ERROR)},E={post:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];a&&c.loadMask("正在请求服务..."),"string"==typeof e&&(e={url:e});var o=e.url,n=(e.desc,e.responseType||"json");return new s.default(function(e,s){v({url:o,method:"post",data:t,responseType:n,transformRequest:[function(e){var t=new FormData;if(e.constructor==FormData)return e;for(var a in e)e[a]instanceof Object?e[a].constructor==File?t.append(a,e[a]):t.append(a,(0,r.default)(e[a])):t.append(a,e[a]);return t}]}).then(function(t){var a=t.data;if(a.type==d.default.SUCCESS)e(t.data);else if(a.type==d.default.ERROR&&"SYS_ERR"==a.failtCode)c.showMessage(a.message,c.messageType.ERROR,{detailOption:a}),s(t.data);else{if("blob"===n)return void e(t);e(t.data)}E.toLogin(a)}).catch(function(e){_(e,t),s(e)}).finally(function(){a&&c.closeLoadMask()})})},postJsonRequest:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];a&&c.loadMask("正在请求服务..."),"string"==typeof e&&(e={url:e});var o=e.url;e.desc;return new s.default(function(e,n){v({url:o,method:"post",headers:{"Content-Type":"application/json;charSet=UTF-8"},data:t}).then(function(t){var a=t.data;a.type==d.default.SUCCESS?e(t.data):a.type==d.default.ERROR&&"SYS_ERR"==a.failtCode?c.showMessage(a.message,c.messageType.ERROR,{detailOption:a}):e(t.data),E.toLogin(a)}).catch(function(e){_(e,t),n(e)}).finally(function(){a&&c.closeLoadMask()})})},postForSmartClient:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"==typeof e&&(e={url:e});var a=e.url,o=e.desc||"";return new s.default(function(e,n){v({url:a,method:"post",data:t,useOptions:{ForSmartClient:!0}}).then(function(t){var a=t.data;if(a.type==d.default.SUCCESS)e(t.data);else{if(a.type==d.default.ERROR)return c.showMessage("请求【"+o+"】错误："+a.message,c.messageType.ERROR),void n();e(t.data)}}).catch(function(e){y(e,"【智能客户端TechSvr】"),n(e)})})},get:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"==typeof e&&(e={url:e});var a=e.url;e.desc;return new s.default(function(e,o){v({url:a,method:"get",params:t,headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json;charset=UTF-8"}}).then(function(t){e(t.data),E.toLogin(t.data)}).catch(function(e){_(e,t),o(e)})})},put:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";"string"==typeof e&&(e={url:e});var o=e.url+a;e.desc;return new s.default(function(e,a){v({url:o,method:"put",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(t){e(t.data),E.toLogin(t.data)}).catch(function(e){_(e,t),a(e)})})},delete:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";"string"==typeof e&&(e={url:e});var a=e.url+t;e.desc;return new s.default(function(e,t){v({url:a,method:"delete",headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(t){e(t.data),E.toLogin(t.data)}).catch(function(e){_(e,params),t(e)})})},options:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];"string"==typeof e&&(e={url:e});var t=e.url;e.desc;return new s.default(function(e,a){v({url:t,method:"options"}).then(function(t){e(t)}).catch(function(e){a(e)})})},GetUrlQueryParam:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(t);return a?unescape(a[2]):""},fileUtils:{uploadFile:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments[2],o=arguments[3];o&&c.loadMask("正在请求服务..."),"string"==typeof e&&(e={url:e});var n=e.url;e.desc;return new s.default(function(e,s){v({url:n,method:"post",data:t,onUploadProgress:function(e){e.lengthComputable&&a(e)}}).then(function(t){var a=t.data;e(a.type==d.default.SUCCESS?t.data:a.type==d.default.ERROR?t.data:t.data),E.toLogin(a)}).catch(function(e){_(e,t),s(e)}).finally(function(){o&&c.closeLoadMask()})})}},toLogin:function(e){if("4040"==e.messageCode||"4041"==e.messageCode){if(!T)return!1;T=!1,c.alertMessage(e.message,"提示","warning",{showClose:!1}).then(function(){top.window.location.reload(),T=!0})}}};t.default=E},KBB5:function(e,t,a){var o=a("LXSn");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a("rjj0")("2e111f58",o,!0)},KrYa:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".home-page-wrap-ba[data-v-6b8ed318]{height:100%;padding:12px 15px;background:#eaedf4;overflow-x:auto;overflow-y:hidden}.home-page-wrap-ba .title[data-v-6b8ed318]{font-weight:500;font-size:14px;color:#000622}.home-page-wrap-ba .home-page-body[data-v-6b8ed318]{padding:16px;background:#fff;border-radius:2px}.home-page-wrap-ba .home-page-body .left-body[data-v-6b8ed318]{height:100%;width:calc(100% - 415px);float:left}.home-page-wrap-ba .home-page-body .right-body[data-v-6b8ed318]{width:400px;margin-left:15px;height:100%;float:right;background:#fff}",""])},LXSn:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".pd-right .w-input{width:200px!important}.w-row{padding-bottom:16px}.unitDepartment-tag{width:70%;min-height:44px;background-color:#f3f6fe;border-radius:4px;display:inline-block}.unitDepartment-tag span{display:inline-block;padding-left:10px;color:#999}.unitDepartment-tag .w-input,.unitDepartment-tag .w-input__inner{width:100%!important;min-height:44px!important}.unitDepartment-tag:hover{background-color:#e7edfd}",""])},Njol:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n,s=a("bOdI"),l=o(s),r=a("Dd8w"),i=o(r),d=a("Xxa5"),u=o(d),c=a("exGp"),m=o(c),f=a("u2dG"),p=o(f);t.default={components:{},data:function(){return{listTable:[{prop:"name",label:"姓名"}],value:"",visible:!1,operationVal:1,numVal:1,modalTitle:"",modalType:"",showInput:!1,mouldcode:"",maincode:"",value2:"",implement:[],openings:[],mainTypesList:[],detailTypesList:[],tableData:[{value:"1",name:"悄悄告诉"},{value:"2",name:"一个秘密"},{value:"3",name:"往下看"},{value:"4",name:"哎呀，没了"},{value:"5",name:"我出来喽"},{value:"6",name:"好吧告诉你"},{value:"7",name:"这个秘密啊"},{value:"8",name:"这个秘密就是"},{value:"9",name:"就是"},{value:"10",name:"下班喽"}],mtype:[{value:"1",name:"常规备血"},{value:"2",name:"常规用血"},{value:3,name:"紧急用血"},{value:"4",name:"自体输血"},{value:"5",name:"备血预约"}],category:[{value:"0",name:"门诊"},{value:"1",name:"住院"},{value:"2",name:"体检"},{value:"9",name:"全部"}],MODAL_TITLE:{ADD:"新增",EADIT:"修改",FORM:"申请单",ITEM:"项目",LARGE_CLASS:"成分大类",SUB_CLASS:"成分小类",SELECT_ITEM:"选择对应项目",TIPS:"提示",CLONE:"复制"},codeLIst:{code:"",name:""},form:{mouldcode:"",mouldname:"",mouldtype:"",execdeptcode:"",applydeptcode:"",usearea:"",itemcode:"",itemname:"",maincode:"",mainname:"",detailcode:"",detailname:"",amount:0,hisitemcode:"",addfactor:0,remark:"",code:"",name:""},mouldItemsRow:{},rules:{mouldcode:[{required:!0,message:"请输入模板代码",trigger:"blur"}],mouldname:[{required:!0,message:"请输入模板名称",trigger:"blur"}],itemcode:[{required:!0,message:"请输入项目代码",trigger:"blur"}],itemname:[{required:!0,message:"请输入项目名称",trigger:"blur"}],mouldtype:[{required:!0,message:"请选择模板类型",trigger:"change"}],execdeptcode:[{required:!0,message:"请选择执行科室",trigger:"change"}],applydeptcode:[{required:!0,message:"请选择开单科室",trigger:"change"}],usearea:[{required:!0,message:"请选择开单类别",trigger:"change"}],hisitemcode:[{required:!0,message:"请选择费用对应",trigger:"change"}]},selection:[],options:[{value:"选项1",label:"安徽"},{value:"选项2",label:"上海"},{value:"选项3",label:"北京"},{value:"选项4",label:"南京"},{value:"选项5",label:"深圳"}],listMouldItems:[],listMoulds:[],optionsValue:"选项1"}},computed:{},watch:{"form.maincode":function(e,t){console.log(e,t)},"form.detailcode":function(e,t){console.log(e,t)},listMoulds:function(e,t){this.mouldItemsRow.MOULD_CODE?(this.$nextTick(function(){this.$refs.interfaceTable.setCurrentRow(this.listMoulds[this.mouldItemsRow.index])}),this.MouldItems(e[this.mouldItemsRow.index]),this.mouldcode=e[this.mouldItemsRow.index].MOULD_CODE):(this.$nextTick(function(){this.$refs.interfaceTable.setCurrentRow(this.listMoulds[0])}),this.MouldItems(e[0]),this.mouldcode=e[0].MOULD_CODE)}},created:function(){this.Moulds()},mounted:function(){},methods:(n={handleRowe:function(e){console.log(e)},handleSelectionChangew:function(e){console.log("val:",e)},MouldItems:function(e){var t=this;return(0,m.default)(u.default.mark(function a(){var o;return u.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,p.default.getMouldItems({mouldcode:e.MOULD_CODE});case 2:o=a.sent,t.listMouldItems=o.data;case 4:case"end":return a.stop()}},a,t)}))()},Moulds:function(){var e=this;return(0,m.default)(u.default.mark(function t(){var a;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.default.getMoulds();case 2:a=t.sent,e.listMoulds=a.data;case 4:case"end":return t.stop()}},t,e)}))()},handleClone:function(e){this.visible=!0},handleSelectionChange:function(e){this.selection=e,console.log(this.selection)},hadleInputFocus:function(){this.visible=!0,this.modalType="",this.modalTitle=this.MODAL_TITLE.SELECT_ITEM},handlePlus:function(e){this.modalTitle="big"===e?this.MODAL_TITLE.LARGE_CLASS:this.MODAL_TITLE.SUB_CLASS,console.log("模态框➕按钮事件")},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;t.index=a},handleRow:function(e){console.log(e),this.mouldItemsRow=e,this.MouldItems(e)},handleSelChange:function(e){console.log(e),this.getListDetailTypes(e.DETAIL_CODE),this.maincode=e.DETAIL_CODE,this.form.detailname="",this.form.detailcode="",this.form.itemcode="",this.form.itemname=""},handleSelChange1:function(e){var t=this;return(0,m.default)(u.default.mark(function a(){var o,n;return u.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e&&(t.form.itemcode=e.DETAIL_CODE,t.form.itemname=e.DETAIL_NAME,t.form=(0,i.default)({},t.form)),""!==t.form.maincode){a.next=11;break}return a.next=4,p.default.getByDetailType({detailcode:e.DETAIL_CODE});case 4:o=a.sent,n=[],n.push(o.data),t.mainTypesList=n,t.form.maincode=o.data.MAIN_NAME,t.getListDetailTypes(o.data.MAIN_CODE),t.getListMainTypes();case 11:case"end":return a.stop()}},a,t)}))()},submit:function(){var e=this;return(0,m.default)(u.default.mark(function t(){return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.modalTitle===e.MODAL_TITLE.SELECT_ITEM?(console.log(e.selection),e.modalTitle="项目"):e.$refs.form.validateForm(function(){var t=(0,m.default)(u.default.mark(function t(a){var o,n,s,l,r,d,c,m,f;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=49;break}if(e.modalType!==e.MODAL_TITLE.EADIT){t.next=17;break}if("申请单"!==e.modalTitle){t.next=10;break}return t.next=5,p.default.getModifyMould((0,i.default)({},e.form));case 5:o=t.sent,console.log(o.type),"SUCCESS"===o.type?(e.showMsg(o.message,"success"),e.Moulds(),e.visible=!1):e.showMsg(o.message,"error"),t.next=15;break;case 10:return n={mouldcode:e.mouldItemsRow.MOULD_CODE||e.mouldcode,itemcode:e.form.itemcode,itemname:e.form.itemname,maincode:e.form.maincode.value,mainname:e.form.maincode.DETAIL_NAME,detailcode:e.form.detailcode.value,detailname:e.form.detailcode.DETAIL_NAME,amount:e.form.amount,hisitemcode:e.form.hisitemcode,addfactor:e.form.addfactor,remark:e.form.remark},t.next=13,p.default.getModifyMouldItem((0,i.default)({},n));case 13:s=t.sent,"SUCCESS"===s.type?(e.showMsg(s.message,"success"),e.MouldItems(),e.visible=!1):e.showMsg(s.message,"error");case 15:t.next=47;break;case 17:if("项目"!==e.modalTitle){t.next=26;break}return console.log(e.form),l={mouldcode:e.mouldItemsRow.MOULD_CODE||e.mouldcode,itemcode:e.form.itemcode,itemname:e.form.itemname,maincode:e.form.maincode.value,mainname:e.form.maincode.DETAIL_NAME,detailcode:e.form.detailcode.value,detailname:e.form.detailcode.DETAIL_NAME,amount:e.form.amount,hisitemcode:e.form.hisitemcode,addfactor:e.form.addfactor,remark:e.form.remark},t.next=22,p.default.getAddMouldItem((0,i.default)({},l));case 22:r=t.sent,"SUCCESS"===r.type?(e.showMsg(r.message,"success"),e.visible=!1,e.MouldItems(e.mouldItemsRow)):e.showMsg(r.message,"error"),t.next=47;break;case 26:if("成分大类"!==e.modalTitle){t.next=34;break}return t.next=29,p.default.gitAddMainComponentType({maincode:e.form.code,mainname:e.form.name});case 29:d=t.sent,console.log(d,"成分大类"),"SUCCESS"===d.type?(e.showMsg(d.message,"success"),e.getListMainTypes(),e.modalTitle="项目"):e.showMsg(d.message,"error"),t.next=47;break;case 34:if("成分小类"!==e.modalTitle){t.next=42;break}return t.next=37,p.default.getAddDetailComponentType({detailcode:e.form.code,detailname:e.form.name,maincode:e.maincode});case 37:c=t.sent,console.log(c),"SUCCESS"===c.type?(e.showMsg(c.message,"success"),e.modalTitle="项目",e.getListMainTypes()):e.showMsg(c.success,"error"),t.next=47;break;case 42:return m={mouldcode:e.form.mouldcode,mouldname:e.form.mouldname,mouldtype:e.form.mouldtype,execdeptcode:e.form.execdeptcode,applydeptcode:e.form.applydeptcode,usearea:e.form.usearea,copiedmouldcode:e.mouldItemsRow.MOULD_CODE},t.next=45,p.default.getAddMould((0,i.default)({},m));case 45:f=t.sent,"SUCCESS"===f.type?(e.showMsg(f.message,"success"),e.Moulds(),e.visible=!1):e.showMsg(f.message,"error");case 47:t.next=50;break;case 49:console.log("invalid form !");case 50:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}},t,e)}))()},reset:function(){this.$refs.form.resetFields(),"成分大类"===this.modalTitle||"成分小类"===this.modalTitle?this.modalTitle="项目":this.modalTitle===this.MODAL_TITLE.SELECT_ITEM?this.modalTitle="项目":(this.form.maincode="",this.form.mainname="",this.form.remark="",this.form.amount=0,this.form.addfactor=0,this.$refs.form.resetFields(),this.visible=!1)},handleConfirm:function(e,t,a){this.isShowRow(t,"delete",e,a),this.tableData.splice(a,1)},handleCancel:function(e){var t=this;this.cancelManually=!0,setTimeout(function(){t.listMouldItems[e].switch=!t.listMouldItems[e].switch},200)},handleAdd:function(e){this.visible=!0,this.modalType=this.MODAL_TITLE.ADD,this.isShowRow(e)},onEditing:function(e,t){this.visible=!0,this.modalType=this.MODAL_TITLE.EADIT,this.isShowRow(t,"edit",e),console.log(e)}},(0,l.default)(n,"handleClone",function(e,t){this.visible=!0,this.modalType="",this.isShowRow(t,"clone",e)}),(0,l.default)(n,"handleClose",function(e){this.selection.splice(this.selection.indexOf(e),1)}),(0,l.default)(n,"add",function(e){this.showInput=!0!==e}),(0,l.default)(n,"isShowRow",function(e,t,a,o){var n=this;return(0,m.default)(u.default.mark(function s(){var l,r,i,d,c;return u.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if("left"!==e){s.next=24;break}if("delete"!==t){s.next=5;break}n.$confirm("删除此模版将同步删除申请单下的所有项目， 是否确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((0,m.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.default.getRemoveMould({mouldcode:a.MOULD_CODE});case 2:t=e.sent,"SUCCESS"===t.type?(n.showMsg(t.message,"success"),n.listMoulds.splice(o,1),n.Moulds()):n.showMsg(t.message,"error");case 4:case"end":return e.stop()}},e,n)}))).catch(function(){n.$message({type:"info",message:"已取消删除"})}),s.next=14;break;case 5:if("edit"!==t&&"clone"!==t){s.next=13;break}return n.modalTitle=n.MODAL_TITLE.FORM,s.next=9,p.default.getFindMould({mouldcode:a.MOULD_CODE});case 9:l=s.sent,"clone"===t?(n.form=l.data,n.$set(n.form,n.form.execdeptcode,12345),n.form.mouldcode="",n.form.mouldname=""):n.form=l.data,s.next=14;break;case 13:n.modalTitle=n.MODAL_TITLE.FORM;case 14:return s.next=16,p.default.getDeptInfos({depttype:"3"});case 16:return r=s.sent,n.implement=r.data,s.next=20,p.default.getDeptInfos({depttype:"1"});case 20:i=s.sent,n.openings=i.data,s.next=48;break;case 24:if("right"!==e){s.next=47;break}if("delete"!==t){s.next=32;break}return s.next=28,p.default.getRemoveMouldItem({itemcode:a.MOULD_ITEM_CODE,mouldcode:n.mouldItemsRow.MOULD_CODE});case 28:d=s.sent,"SUCCESS"===d.type?(n.showMsg(d.message,"success"),n.listMouldItems.splice(o,1),n.MouldItems(n.mouldItemsRow)):n.showMsg(d.message,"error"),s.next=43;break;case 32:if("edit"!==t){s.next=42;break}return n.modalTitle=n.MODAL_TITLE.ITEM,console.log(n.mouldcode),s.next=37,p.default.getFindMouldItem({mouldcode:n.mouldcode,itemcode:a.MOULD_ITEM_CODE});case 37:c=s.sent,n.form=c.data,console.log(c,a.MOULD_ITEM_CODE),s.next=43;break;case 42:n.modalTitle=n.MODAL_TITLE.ITEM;case 43:n.getListDetailTypes(),n.getListMainTypes(),s.next=48;break;case 47:n.modalTitle=n.MODAL_TITLE.CLONE;case 48:console.log(e);case 49:case"end":return s.stop()}},s,n)}))()}),(0,l.default)(n,"handlePageSizeChange",function(e){console.log(e,"条/页")}),(0,l.default)(n,"getListMainTypes",function(){var e=this;return(0,m.default)(u.default.mark(function t(){var a;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.default.getListMainTypes();case 2:a=t.sent,e.mainTypesList=a.data,console.log(a);case 5:case"end":return t.stop()}},t,e)}))()}),(0,l.default)(n,"getListDetailTypes",function(e){var t=this;return(0,m.default)(u.default.mark(function a(){var o;return u.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(e,t.form.maincode),a.next=3,p.default.getListDetailTypes({maincode:e});case 3:o=a.sent,t.detailTypesList=o.data;case 5:case"end":return a.stop()}},a,t)}))()}),n)}},"g/04":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={ERROR:"ERROR",FAILT:"FAILT",NORMAL:"NORMAL",SUCCESS:"SUCCESS"};t.default=o},lRP1:function(e,t,a){function o(e){a("rKcS"),a("KBB5")}var n=a("VU/8")(a("Njol"),a("4WqT"),o,"data-v-6b8ed318",null);e.exports=n.exports},rKcS:function(e,t,a){var o=a("KrYa");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a("rjj0")("c4f53a6a",o,!0)},u2dG:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("Gm+R"),n=function(e){return e&&e.__esModule?e:{default:e}}(o),s=a("mYGX"),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(s),r=(l.SYS_BASE_API.APPLYFORM.url,"http://172.17.1.211:20034"),i={getMouldItems:r+"/clf/trfbase/listMouldItems",getMoulds:r+"/clf/trfbase/listMoulds",getListDetailTypes:r+"/clf/trfbase/listDetailTypes",getListMainTypes:r+"/clf/trfbase/listMainTypes",getDeptInfos:r+"/clf/trfbase/listDeptInfos",getFindMouldItem:r+"/clf/trfbase/findMouldItem",getFindMould:r+"/clf/trfbase/findMould",getByDetailType:r+"/clf/trfbase/findMainTypeByDetailType",getExists:r+"/clf/trfbase/exists ",getAddMould:r+"/clf/trfbase/addMould",gitAddMainComponentType:r+"/clf/trfbase/addMainComponentType",getAddDetailComponentType:r+"/clf/trfbase/addDetailComponentType",getAddMouldItem:r+"/clf/trfbase/addMouldItem",getRemoveMouldItem:r+"/clf/trfbase/removeMouldItem",getRemoveMould:r+"/clf/trfbase/removeMould",getModifyMouldItem:r+"/clf/trfbase/modifyMouldItem",getModifyMould:r+"/clf/trfbase/modifyMould"};t.default={getMouldItems:function(e){return n.default.postJsonRequest(i.getMouldItems,e)},getMoulds:function(e){return n.default.postJsonRequest(i.getMoulds,e)},getAddMould:function(e){return n.default.postJsonRequest(i.getAddMould,e)},getAddMouldItem:function(e){return n.default.postJsonRequest(i.getAddMouldItem,e)},getRemoveMouldItem:function(e){return n.default.postJsonRequest(i.getRemoveMouldItem,e)},getRemoveMould:function(e){return n.default.postJsonRequest(i.getRemoveMould,e)},getAddMainComponentType:function(e){return n.default.postJsonRequest(i.getAddMainComponentType,e)},getDeptInfos:function(e){return n.default.postJsonRequest(i.getDeptInfos,e)},getListDetailTypes:function(e){return n.default.postJsonRequest(i.getListDetailTypes,e)},getListMainTypes:function(e){return n.default.postJsonRequest(i.getListMainTypes,e)},gitAddMainComponentType:function(e){return n.default.postJsonRequest(i.gitAddMainComponentType,e)},getAddDetailComponentType:function(e){return n.default.postJsonRequest(i.getAddDetailComponentType,e)},getModifyMouldItem:function(e){return n.default.postJsonRequest(i.getModifyMouldItem,e)},getModifyMould:function(e){return n.default.postJsonRequest(i.getModifyMould,e)},getFindMouldItem:function(e){return n.default.postJsonRequest(i.getFindMouldItem,e)},getFindMould:function(e){return n.default.postJsonRequest(i.getFindMould,e)},getByDetailType:function(e){return n.default.postJsonRequest(i.getByDetailType,e)}}}});