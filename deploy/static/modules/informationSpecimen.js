webpackJsonp(["informationSpecimen"],{"Gm+R":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("//Fk"),i=a(r),s=n("mvHQ"),o=a(s),u=n("g/04"),c=a(u),l=n("cCA+"),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),f=n("UeB+"),p=a(f),h=n("7+uW"),g=a(h),m=n("NYxO"),v=a(m),w=n("mtWM");g.default.use(v.default);var b=function(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.href)||[,""])[1].replace(/\+/g,"%20"))||null},x=void 0,k=!0;w.interceptors.request.use(function(e){if("options"==e.method)return e;if(e.useOptions&&1==e.useOptions.ForSmartClient)return e;e.headers.Authorization=authToken||jwt;var t=[],n=b("menuid");t.push(n);var a=window.rootVue.$route,r="";return a&&a.params&&a.params.menuid&&(r=a.params.menuid,t.push(r)),e.headers.menuid=t.join(","),x||(x=p.default.getClientInfo()),e.headers.ClientInfo=encodeURIComponent((0,o.default)(x)),e},function(e){return i.default.reject(e)}),w.interceptors.response.use(function(e){return e.status>=200&&e.status<=300?e:i.default.reject(e)},function(e){return i.default.reject(e)});var y=function(e,t){var n="";if(e&&e.response)switch(e.response.status){case 400:n="请求错误";break;case 401:n="未授权，请登录";break;case 403:n="拒绝访问";break;case 404:n="请求地址出错: "+e.response.config.url;break;case 408:n="请求超时";break;case 500:n="服务器内部错误";break;case 501:n="服务未实现";break;case 502:n="网关错误";break;case 503:n="服务不可用";break;case 504:e.message="网关超时";break;case 505:n="HTTP版本不受支持"}e.message.indexOf("timeout of")>=0?n="请求服务已超时":"Network Error"==e.message&&(n="网络服务异常，请检查网路服务是否正常。"),t.isOnline||d.showMessage("请求服务异常，"+e.message+"："+n,d.messageType.ERROR)},L=function(e,t){var n="";if(e&&e.response)switch(e.response.status){case 400:n="请求错误";break;case 401:n="未授权，请登录";break;case 403:n="拒绝访问";break;case 404:n="请求地址出错: "+e.response.config.url;break;case 408:n="请求超时";break;case 500:n="服务器内部错误";break;case 501:n="服务未实现";break;case 502:n="网关错误";break;case 503:n="服务不可用";break;case 504:e.message="网关超时";break;case 505:n="HTTP版本不受支持"}e.message.indexOf("timeout of")>=0?n="请求服务已超时":e.message,t=t||"",d.showMessage("请求"+t+"服务错误,请检查TechSvr是否启动："+e.message+">>"+n,d.messageType.ERROR)},R={post:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n&&d.loadMask("正在请求服务..."),"string"==typeof e&&(e={url:e});var a=e.url,r=(e.desc,e.responseType||"json");return new i.default(function(e,i){w({url:a,method:"post",data:t,responseType:r,transformRequest:[function(e){var t=new FormData;if(e.constructor==FormData)return e;for(var n in e)e[n]instanceof Object?e[n].constructor==File?t.append(n,e[n]):t.append(n,(0,o.default)(e[n])):t.append(n,e[n]);return t}]}).then(function(t){var n=t.data;if(n.type==c.default.SUCCESS)e(t.data);else if(n.type==c.default.ERROR&&"SYS_ERR"==n.failtCode)d.showMessage(n.message,d.messageType.ERROR,{detailOption:n}),i(t.data);else{if("blob"===r)return void e(t);e(t.data)}R.toLogin(n)}).catch(function(e){y(e,t),i(e)}).finally(function(){n&&d.closeLoadMask()})})},postJsonRequest:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n&&d.loadMask("正在请求服务..."),"string"==typeof e&&(e={url:e});var a=e.url;e.desc;return new i.default(function(e,r){w({url:a,method:"post",headers:{"Content-Type":"application/json;charSet=UTF-8"},data:t}).then(function(t){var n=t.data;n.type==c.default.SUCCESS?e(t.data):n.type==c.default.ERROR&&"SYS_ERR"==n.failtCode?d.showMessage(n.message,d.messageType.ERROR,{detailOption:n}):e(t.data),R.toLogin(n)}).catch(function(e){y(e,t),r(e)}).finally(function(){n&&d.closeLoadMask()})})},postForSmartClient:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"==typeof e&&(e={url:e});var n=e.url,a=e.desc||"";return new i.default(function(e,r){w({url:n,method:"post",data:t,useOptions:{ForSmartClient:!0}}).then(function(t){var n=t.data;if(n.type==c.default.SUCCESS)e(t.data);else{if(n.type==c.default.ERROR)return d.showMessage("请求【"+a+"】错误："+n.message,d.messageType.ERROR),void r();e(t.data)}}).catch(function(e){L(e,"【智能客户端TechSvr】"),r(e)})})},get:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"==typeof e&&(e={url:e});var n=e.url;e.desc;return new i.default(function(e,a){w({url:n,method:"get",params:t,headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json;charset=UTF-8"}}).then(function(t){e(t.data),R.toLogin(t.data)}).catch(function(e){y(e,t),a(e)})})},put:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";"string"==typeof e&&(e={url:e});var a=e.url+n;e.desc;return new i.default(function(e,n){w({url:a,method:"put",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(t){e(t.data),R.toLogin(t.data)}).catch(function(e){y(e,t),n(e)})})},delete:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";"string"==typeof e&&(e={url:e});var n=e.url+t;e.desc;return new i.default(function(e,t){w({url:n,method:"delete",headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(t){e(t.data),R.toLogin(t.data)}).catch(function(e){y(e,params),t(e)})})},options:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];"string"==typeof e&&(e={url:e});var t=e.url;e.desc;return new i.default(function(e,n){w({url:t,method:"options"}).then(function(t){e(t)}).catch(function(e){n(e)})})},GetUrlQueryParam:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return n?unescape(n[2]):""},fileUtils:{uploadFile:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2],a=arguments[3];a&&d.loadMask("正在请求服务..."),"string"==typeof e&&(e={url:e});var r=e.url;e.desc;return new i.default(function(e,i){w({url:r,method:"post",data:t,onUploadProgress:function(e){e.lengthComputable&&n(e)}}).then(function(t){var n=t.data;e(n.type==c.default.SUCCESS?t.data:n.type==c.default.ERROR?t.data:t.data),R.toLogin(n)}).catch(function(e){y(e,t),i(e)}).finally(function(){a&&d.closeLoadMask()})})}},toLogin:function(e){if("4040"==e.messageCode||"4041"==e.messageCode){if(!k)return!1;k=!1,d.alertMessage(e.message,"提示","warning",{showClose:!1}).then(function(){top.window.location.reload(),k=!0})}}};t.default=R},V6OP:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("Xxa5"),i=a(r),s=n("exGp"),o=a(s),u=n("cCA+"),c=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(u),n("bqAC")),l=a(c),d=n("M4fF"),f=a(d);t.default={data:function(){var e=this;return{titlee:"123455",isShow:!0,modalData:{visible:!0,title:"test",width:"35%",height:"300px"},visible:!1,title:"",hoverIndex:0,clickIndex:0,hoverIndex1:0,clickIndex1:0,hoverIndex2:-1,clickIndex2:-1,editVal:!1,show:!0,findId:"",findtype:"",h:"",idVal:{},isHandleOrgRow:!1,isHandlePosRow:!1,form:{editVal:"",dynamicArr:[]},rules:{test:[{validator:function(){var t=(0,o.default)(i.default.mark(function t(n,a,r){var s,o;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=10;break}return s={type:"specimen",name:a},e.next=4,l.default.isHaveReName(s);case 4:if(o=e.sent,"SUCCESS"===o.type){e.next=9;break}return e.abrupt("return",r(new Error("该名称已存在！")));case 9:r();case 10:case"end":return e.stop()}},t,e)}));return function(e,n,a){return t.apply(this,arguments)}}(),trigger:"blur"}]},idValue:"",organList:[],rowOrgList:{},positionList:[],rowPosList:{},nameList:[],rowNamList:{}}},created:function(){this.getOrganList()},watch:{editVal:function(e,t){console.log("o,n",e,t)}},methods:{handle:function(e,t,n){var a=this;return(0,o.default)(i.default.mark(function r(){var s,o,u;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(a.isTitle(t),"器官/系统"!==t){r.next=26;break}return a.rowOrgList=e,a.clickIndex=n,a.isHandleOrgRow=!0,a.clickIndex2=-1,a.clickIndex1=0,r.next=9,l.default.getQuery({id:e.ID});case 9:if(s=r.sent,a.positionList=s.data,!(a.positionList.length>0)){r.next=23;break}return console.log("this.positionList.specimenName",a.positionList.specimenName),r.next=15,l.default.getQuery({id:a.positionList[0].ID});case 15:if(o=r.sent,a.nameList=[],null!==o.data){r.next=19;break}return r.abrupt("return");case 19:"SUCCESS"===o.type&&(a.nameList=o.data),a.show=!0,r.next=24;break;case 23:a.show=!1;case 24:r.next=39;break;case 26:if("标本部位"!==t){r.next=37;break}return a.isHandlePosRow=!0,a.rowPosList=e,a.clickIndex1=n,a.clickIndex2=-1,r.next=33,l.default.getQuery({id:e.ID});case 33:u=r.sent,a.nameList=u.data,r.next=39;break;case 37:a.rowNamList=e,a.clickIndex2=n;case 39:case"end":return r.stop()}},r,a)}))()},getOrganList:function(e){var t=this;return(0,o.default)(i.default.mark(function n(){var a,r,s;return i.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.default.getQuery();case 2:if(a=n.sent,t.organList=a.data,e){n.next=16;break}if(0===t.organList.length){n.next=11;break}return n.next=8,l.default.getQuery({id:t.organList[0].ID});case 8:r=n.sent,t.positionList=r.data,console.log(r,t.positionList[0]);case 11:if(0===t.positionList.length){n.next=16;break}return n.next=14,l.default.getQuery({id:t.positionList[0].ID});case 14:s=n.sent,t.nameList=s.data;case 16:case"end":return n.stop()}},n,t)}))()},getQueryList:function(e){var t=this;return(0,o.default)(i.default.mark(function n(){var a;return i.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=14;break}return n.next=3,l.default.getQuery({id:e});case 3:a=n.sent,n.t0=t.title,n.next="标本部位"===n.t0?7:"器官/系统"===n.t0?10:13;break;case 7:return t.nameList=a.data,console.log(a),n.abrupt("break",14);case 10:return console.log(a),t.positionList=a.data,n.abrupt("break",14);case 13:return n.abrupt("break",14);case 14:case"end":return n.stop()}},n,t)}))()},idData:function(){var e="";console.log("this.title",this.title),"标本部位"===this.title?!1===this.isHandleOrgRow?e=this.organList[0].ID:(e=this.rowOrgList.ID,console.log("this.rowOrgList.ID",this.rowOrgList.ID),0===this.positionList.length&&(this.nameList=[])):"标本名称"===this.title&&(e=!1===this.isHandlePosRow?this.positionList[0].ID:this.rowPosList.ID),this.idValue=e},succData:function(e,t){var n=this;return(0,o.default)(i.default.mark(function e(){var t,a,r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.idData(),"标本部位"!==n.title){e.next=8;break}return e.next=4,l.default.getQuery({id:n.idValue});case 4:t=e.sent,n.positionList=t.data,e.next=20;break;case 8:if("标本名称"!==n.title){e.next=15;break}return e.next=11,l.default.getQuery({id:n.idValue});case 11:a=e.sent,n.nameList=a.data,e.next=20;break;case 15:return n.isHandleOrgRow=!1,e.next=18,l.default.getQuery();case 18:r=e.sent,n.organList=r.data;case 20:case"end":return e.stop()}},e,n)}))()},handleAdd:function(e){this.visible=!0,this.editVal=!1;this.isTitle(e),this.h="新增",this.idData(),this.form.dynamicArr.push({pafTemplateId:"",specimenName:"",pafSpecimenFid:this.idValue,seqNo:"器官/系统"===e?this.organList.length:("标本部位"===e?this.positionList.length:this.nameList.length)+this.form.dynamicArr.length+1,specimenType:"器官/系统"===e?1:"标本部位"===e?2:3})},handleEdit:function(e){var t=this;return(0,o.default)(i.default.mark(function n(){return i.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:console.log(e),t.h="修改",t.form.editVal=e.SPECIMEN_NAME,t.idVal=e,t.editVal=!0,t.visible=!0;case 6:case"end":return n.stop()}},n,t)}))()},handleDelete:f.default.debounce(function(){var e=(0,o.default)(i.default.mark(function e(t,n,a){var r,s=this;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r="",r=3===t.SPECIMEN_TYPE?",":"以及子级数据,",this.$confirm("此操作将永久删除该数据"+r+"是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((0,o.default)(i.default.mark(function e(){var r,o,u,c,d,f;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,n,t.SPECIMEN_TYPE),e.next=3,l.default.getDelete({id:t.ID});case 3:if(r=e.sent,s.showMsg1(r,"删除"),o="",u="",o="标本部位"===s.title?s.positionList:s.organList,o.map(function(e,t){e.index=t}),3!==t.SPECIMEN_TYPE){e.next=17;break}return console.log("this.idValue",s.idValue,s.title),e.next=13,l.default.getQuery({id:s.idValue});case 13:c=e.sent,s.nameList=c.data,e.next=18;break;case 17:2===t.SPECIMEN_TYPE?(console.log("list.index",o.index,o.length),1!==o.length?o[o.length-1].ID===t.ID?(u=o[o.length-2].ID,s.clickIndex1=a-1):(d=o.find(function(e){return e.index===a+1}),d&&(u=d.ID),s.clickIndex1=a):u=""):(console.log("this.rowOrgList",s.rowOrgList),1!==o.length?o[o.length-1].ID===t.ID?(u=o[o.length-2].ID,console.log("1122ids",u),s.clickIndex=a-1):(f=o.find(function(e){return e.index===a+1}),f&&(u=f.ID),s.clickIndex=a):u="");case 18:s.getQueryList(u),console.log("idsidsids",u),s.succData();case 21:case"end":return e.stop()}},e,s)}))).catch(function(){s.$message({type:"info",message:"已取消删除"})});case 3:case"end":return e.stop()}},e,this)}));return function(t,n,a){return e.apply(this,arguments)}}(),300),handleChangeInput:function(e){var t=this;return(0,o.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:""!==t.form.dynamicArr[t.form.dynamicArr.length-1].specimenName&&(t.idData(),t.form.dynamicArr.push({pafTemplateId:"",specimenName:"",pafSpecimenFid:t.idValue,specimenType:"器官/系统"===t.title?1:"标本部位"===t.title?2:3,seqNo:"器官/系统"===t.title?t.organList.length:("标本部位"===t.title?t.positionList.length:t.nameList.length)+t.form.dynamicArr.length+1}));case 1:case"end":return e.stop()}},e,t)}))()},int:function(){this.form.dynamicArr=[],this.form.editVal=""},submit:f.default.debounce(function(){var e=(0,o.default)(i.default.mark(function e(t){var n=this;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.$refs.form.validateForm(function(){var e=(0,o.default)(i.default.mark(function e(a){var r,s,o;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=22;break}if(n.idData(),"新增"!==t){e.next=13;break}return r=[],n.form.dynamicArr.find(function(e){""!==e.specimenName&&r.push(e)}),e.next=7,l.default.getAdd(r);case 7:s=e.sent,console.log("res",s),n.showMsg1(s,"新增"),n.succData(),e.next=18;break;case 13:return e.next=15,l.default.getUpdate({id:n.idVal.ID,specimenName:n.form.editVal});case 15:o=e.sent,n.showMsg1(o,"修改"),n.succData();case 18:n.visible=!1,n.int(),e.next=23;break;case 22:console.log("invalid form !");case 23:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),300),reset:function(){this.$refs.form.resetFields(),this.int(),this.visible=!1},isTitle:function(e){"器官/系统"===e?this.title="器官/系统":"标本部位"===e?(this.show=!0,this.title="标本部位"):this.title="标本名称"}}}},bqAC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Gm+R"),r=function(e){return e&&e.__esModule?e:{default:e}}(a),i=n("mYGX"),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),o=(s.SYS_BASE_API.APPLYFORM.url,"http://172.17.1.211:20032"),u={query:o+"/clf/pafbase/findSpecimenDic",add:o+"/clf/pafbase/addSpecimenDic",update:o+"/clf/pafbase/updateSpecimenDic",delete:o+"/clf/pafbase/deleteSpecimenDic",isHaveReName:o+"/clf/pafbase/isHaveReName"};t.default={getQuery:function(e){return r.default.postJsonRequest(u.query,e)},getAdd:function(e){return r.default.postJsonRequest(u.add,e)},getUpdate:function(e){return r.default.postJsonRequest(u.update,e)},getDelete:function(e){return r.default.postJsonRequest(u.delete,e)},isHaveReName:function(e){return r.default.postJsonRequest(u.isHaveReName,e)}}},"g/04":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={ERROR:"ERROR",FAILT:"FAILT",NORMAL:"NORMAL",SUCCESS:"SUCCESS"};t.default=a}});